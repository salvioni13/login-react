{"ast":null,"code":"const ROOT_URL = 'https://secret-hamlet-03431.herokuapp.com';\nexport async function loginUser(dispatch, loginPayload) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(loginPayload)\n  };\n\n  try {\n    dispatch({\n      type: 'REQUEST_LOGIN'\n    });\n    let response = await fetch(`${ROOT_URL}/login`, requestOptions);\n    let data = await response.json();\n\n    if (data.user) {\n      dispatch({\n        type: 'LOGIN_SUCCESS',\n        payload: data\n      });\n      localStorage.setItem('currentUser', JSON.stringify(data));\n      return data;\n    }\n\n    dispatch({\n      type: 'LOGIN_ERROR',\n      error: data.errors[0]\n    });\n    console.log(data.errors[0]);\n    return;\n  } catch (error) {\n    dispatch({\n      type: 'LOGIN_ERROR',\n      error: error\n    });\n    console.log(error);\n  }\n}\nexport async function logout(dispatch) {\n  dispatch({\n    type: 'LOGOUT'\n  });\n  localStorage.removeItem('currentUser');\n  localStorage.removeItem('token');\n}","map":{"version":3,"sources":["/home/jv/Desktop/Salvioni/react/login-auth-useContext/src/Context/actions.js"],"names":["ROOT_URL","loginUser","dispatch","loginPayload","requestOptions","method","headers","body","JSON","stringify","type","response","fetch","data","json","user","payload","localStorage","setItem","error","errors","console","log","logout","removeItem"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,2CAAjB;AAEA,OAAO,eAAeC,SAAf,CAAyBC,QAAzB,EAAmCC,YAAnC,EAAiD;AACvD,QAAMC,cAAc,GAAG;AACtBC,IAAAA,MAAM,EAAE,MADc;AAEtBC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB,KAFa;AAGtBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,YAAf;AAHgB,GAAvB;;AAMA,MAAI;AACHD,IAAAA,QAAQ,CAAC;AAAEQ,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;AACA,QAAIC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEZ,QAAS,QAAb,EAAsBI,cAAtB,CAA1B;AACA,QAAIS,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAjB;;AAEA,QAAID,IAAI,CAACE,IAAT,EAAe;AACdb,MAAAA,QAAQ,CAAC;AAAEQ,QAAAA,IAAI,EAAE,eAAR;AAAyBM,QAAAA,OAAO,EAAEH;AAAlC,OAAD,CAAR;AACAI,MAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCV,IAAI,CAACC,SAAL,CAAeI,IAAf,CAApC;AACA,aAAOA,IAAP;AACA;;AAEDX,IAAAA,QAAQ,CAAC;AAAEQ,MAAAA,IAAI,EAAE,aAAR;AAAuBS,MAAAA,KAAK,EAAEN,IAAI,CAACO,MAAL,CAAY,CAAZ;AAA9B,KAAD,CAAR;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYT,IAAI,CAACO,MAAL,CAAY,CAAZ,CAAZ;AACA;AACA,GAdD,CAcE,OAAOD,KAAP,EAAc;AACfjB,IAAAA,QAAQ,CAAC;AAAEQ,MAAAA,IAAI,EAAE,aAAR;AAAuBS,MAAAA,KAAK,EAAEA;AAA9B,KAAD,CAAR;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;AACA;AACD;AAED,OAAO,eAAeI,MAAf,CAAsBrB,QAAtB,EAAgC;AACtCA,EAAAA,QAAQ,CAAC;AAAEQ,IAAAA,IAAI,EAAE;AAAR,GAAD,CAAR;AACAO,EAAAA,YAAY,CAACO,UAAb,CAAwB,aAAxB;AACAP,EAAAA,YAAY,CAACO,UAAb,CAAwB,OAAxB;AACA","sourcesContent":["const ROOT_URL = 'https://secret-hamlet-03431.herokuapp.com';\n\nexport async function loginUser(dispatch, loginPayload) {\n\tconst requestOptions = {\n\t\tmethod: 'POST',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(loginPayload),\n\t};\n\n\ttry {\n\t\tdispatch({ type: 'REQUEST_LOGIN' });\n\t\tlet response = await fetch(`${ROOT_URL}/login`, requestOptions);\n\t\tlet data = await response.json();\n\n\t\tif (data.user) {\n\t\t\tdispatch({ type: 'LOGIN_SUCCESS', payload: data });\n\t\t\tlocalStorage.setItem('currentUser', JSON.stringify(data));\n\t\t\treturn data;\n\t\t}\n\n\t\tdispatch({ type: 'LOGIN_ERROR', error: data.errors[0] });\n\t\tconsole.log(data.errors[0]);\n\t\treturn;\n\t} catch (error) {\n\t\tdispatch({ type: 'LOGIN_ERROR', error: error });\n\t\tconsole.log(error);\n\t}\n}\n\nexport async function logout(dispatch) {\n\tdispatch({ type: 'LOGOUT' });\n\tlocalStorage.removeItem('currentUser');\n\tlocalStorage.removeItem('token');\n}\n"]},"metadata":{},"sourceType":"module"}